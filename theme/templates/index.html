{% extends "base.html" %}

{% block content %}

<div class="bg-white p-8 mt-8 shadow-lg shadow-slate-200 rounded-lg w-full xmd:w-2/3 xlg:w-1/3">
  <div class="flex items-center justify-between">
    <span class="text-slate-400 text-sm text-slate-500">Teenistus</span>

    <div class="group relative w-12 ml-6 inline-block border-gray-400 text-center">
      <span class="px-2 py-1 bg-teal-50 rounded-lg text-xs text-teal-400 font-medium min-w-[46px] text-center">{{percent}}%</span>
      <div
        class="opacity-0 w-12 bg-teal-400 text-white text-center text-xs rounded-lg py-2 absolute z-10 group-hover:opacity-100 bottom-full -left-1/2 px-3 pointer-events-none">
        {{left}}
        <svg class="absolute text-black h-2 w-full left-0 top-full" x="0px" y="0px" viewBox="0 0 255 255" xml:space="preserve">
          <polygon class="fill-current" points="0,0 127.5,127.5 255,0" />
        </svg>
      </div>
    </div>

  </div>

  <div class="group relative w-full inline-block border-gray-400 text-center">
    <div class="w-full bg-slate-100 h-4 mb-6 mt-2 rounded shadow-lg shadow-slate-200">
      <div class="bg-teal-400 h-4 rounded text-xs text-center text-white" style="width: {{percent}}%">
        {{served}} / {{totalDays}}
      </div>
    </div>
    <!-- the horizontal spacing is fucked -->
      <div
        class="opacity-0 px-2 left-1/2 -ml-6 bg-teal-400 text-white text-center text-xs rounded-lg py-2 absolute z-10 group-hover:opacity-100 bottom-full pointer-events-none">
        {{left}} days left
        <svg class="absolute text-black h-2 w-full left-0 top-full" x="0px" y="0px" viewBox="0 0 255 255" xml:space="preserve">
          <polygon class="fill-current" points="0,0 127.5,127.5 255,0" />
        </svg>
      </div>
  </div>

  <div class="flex flex-row justify-between">

    {% for m in weeks %}
    <div class="flex flex-col relative text-center text-white justify-center">
      {% for w in m %}
        {% if w.course == 'SBK' %}
        <div class="border-2 border-orange-300  shadow-lg shadow-slate-200 h-9 w-9 mb-4 mt-2 text-xs rounded bg-slate-200">
        {% elif w.course == 'NABK' %}
        <div class="border-2 border-orange-500  shadow-lg shadow-slate-200 h-9 w-9 mb-4 mt-2 text-xs rounded bg-slate-200">
        {% elif w.course == 'NAEK' %}
        <div class="border-2 border-orange-700  shadow-lg shadow-slate-200 h-9 w-9 mb-4 mt-2 text-xs rounded bg-slate-200">
        {% else %}
        <div class="border-2 border-slate-300 border-dashed  shadow-lg shadow-slate-200 h-9 w-9 mb-4 mt-2 text-xs rounded bg-slate-200">
        {% endif %}
        <div class="border-b-2 border-teal-400 left-1 top-1 z-10 h-8 w-10 bg-teal-400 rounded shadow-none flex flex-col "
          style="width: {{w.percent}}%">
        <div class="absoluter -left-1 z-0 text-xs w-7 h-8">
            {{w.month}}  
            </b>
            {{w.monday_day}}
        </div>
        </div>
      </div>
      {%endfor%}
    </div>
    {%endfor%}
  </div>


</div>
{% endblock content %}